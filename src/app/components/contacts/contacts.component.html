<div class="ui" #contactslist >
  <div class="searchbar">

    <input  *ngIf="personalcontacts==false" (keyup)="searchvalue($event)" placeholder="search..." type="text" [(ngModel)]="username">
    <div  *ngIf="personalcontacts==true" class="favs">Favorites </div>
    <!-- <svg xmlns="http://www.w3.org/2000/svg" width="30" height="30" viewBox="0 0 24 24" style="fill: rgba(29 78 216 );"><path d="M19.023 16.977a35.13 35.13 0 0 1-1.367-1.384c-.372-.378-.596-.653-.596-.653l-2.8-1.337A6.962 6.962 0 0 0 16 9c0-3.859-3.14-7-7-7S2 5.141 2 9s3.14 7 7 7c1.763 0 3.37-.66 4.603-1.739l1.337 2.8s.275.224.653.596c.387.363.896.854 1.384 1.367l1.358 1.392.604.646 2.121-2.121-.646-.604c-.379-.372-.885-.866-1.391-1.36zM9 14c-2.757 0-5-2.243-5-5s2.243-5 5-5 5 2.243 5 5-2.243 5-5 5z"></path></svg> -->
    <svg (click)="closecontacts()"  routerLink="/"  style="width: 30px; height:30px;margin-left: auto;cursor:pointer;" fill="rgb(255 255 255)" stroke="rgb(29 78 216 )"
    viewBox="0 0 24 24" xmlns="http://www.w3.org/2000/svg">
    <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2"
      d="M10 14l2-2m0 0l2-2m-2 2l-2-2m2 2l2 2m7-2a9 9 0 11-18 0 9 9 0 0118 0z"></path>
  </svg>
  </div>
<div class="contactsdivider">
  <div (click)="togglecontacts()" class="btncontacts"  [ngClass]="{activebtn:personalcontacts==true}">My contacts</div>
  <div (click)="togglecontacts()" class="btncontacts " [ngClass]="{activebtn:personalcontacts==false}">All contacts</div>
</div>
<ng-container *ngIf="personalcontacts==false">
  <ng-container *ngIf="users|async as contacts ">

    <!-- <div *ngFor="let contact of contacts | filter:username">
      {{contact.username}}
    </div> -->

    <div   *ngFor="let contact of contacts let i=index  trackBy:identify"
   class="contactlist" [ngClass]="{'contactspacing':i+1==contacts.length && contacts.length>7}">
       <div [routerLink]="['/profile',contact._id]" class="w-[20%] h-fit py-1  flex justify-center items-center  ">

           <div class="w-[60px] my-1 bg-cover overflow-hidden  h-[60px] box-border p-2 flex justify-center items-center rounded-full bg-slate-200" >


               <img class="w-full h-full rounded-full " src="{{contact.profileimg}}" alt="" srcset="">
           </div>

       </div>


       <div [routerLink]="['/directmessage',contact._id]" class="w-[65%] h-[inherit]  pl-4   flex    justify-start  items-center ">
           <div  class="flex items-center justify-start h-full text-lg font-semibold text-blue-700 w-fit hover:cursor-pointer "><h1>{{contact.username}}</h1></div>
           <div *ngIf="contact.online== true" class="w-3 h-3 translate-y-[-10px] bg-teal-500 rounded-full mr-auto"></div>
           <!-- <div *ngIf="contact.online== false" class="w-3 h-3 translate-y-[-10px] bg-slate-500 rounded-full mr-auto"></div> -->
           <!-- <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" class="ml-auto" viewBox="0 0 24 24" style="fill: rgba(29 78 216);"><path d="M10.061 19.061 17.121 12l-7.06-7.061-2.122 2.122L12.879 12l-4.94 4.939z"></path></svg> -->
          </div>
          <div class="w-[15%] h-[inherit] bg-green-500 flex justify-center items-center"></div>
       </div>
  </ng-container>
</ng-container>


<ng-container *ngIf="personalcontacts==true">

  <ng-container *ngIf="ui.personalcontacts|async as personalcontacts">

 <div   *ngFor="let contact of personalcontacts let i=index  trackBy:identify"
   class="contactlist" [ngClass]="{'contactspacing':i+1==personalcontacts.length && personalcontacts.length>7}">
       <div [routerLink]="['/profile',contact._id]" class="w-[15%] h-fit py-1  flex justify-center items-center  ">

           <div class="w-[60px] my-1 bg-cover overflow-hidden  h-[60px] box-border p-2 flex justify-center items-center rounded-full bg-slate-200" >


               <img class="w-full h-full rounded-full " src="{{contact.profileimg}}" alt="" srcset="">
           </div>

       </div>


       <div [routerLink]="['/directmessage',contact._id]" class="w-[80%] h-[inherit]  pl-4   flex   justify-start  items-center ">
           <div  class="flex items-center justify-start h-full text-lg font-semibold text-blue-700 w-fit hover:cursor-pointer "><h1>{{contact.username}}</h1></div>
           <div *ngIf="contact.online== true" class="w-3 h-3 translate-y-[-10px] bg-teal-500 rounded-full mr-auto"></div>
           <!-- <div *ngIf="contact.online== false" class="w-3 h-3 translate-y-[-10px] bg-slate-500 rounded-full mr-auto"></div> -->
           <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" class="ml-auto" viewBox="0 0 24 24" style="fill: rgba(29 78 216);"><path d="M10.061 19.061 17.121 12l-7.06-7.061-2.122 2.122L12.879 12l-4.94 4.939z"></path></svg>
       </div>
       </div>

       <div *ngIf="personalcontacts.length==0" class="w-full min-h-[300px] text-2xl text-blue-600 text-center my-auto flex-col  flex justify-center items-center ">
        <span>No Favorite contacts</span>
        <br>
        <span class="text-xs italic font-semibold text-blue-500 w-[80%]">Add favorite contacts by visiting all contacts and clciking on the star</span>
      </div>
  </ng-container>

</ng-container>


          </div>

          <ng-container *ngIf="count |async as totaluser ">

          <div *ngIf="personalcontacts==false"  class="sticky w-full  text-center bottom-0  z-[80] min-h-[50px] pb-2 bg-slate-100">

            <button [ngClass]="{'disabled':allcontacts==totaluser}" [disabled]="allcontacts==totaluser" (click)="fetchmoreusers()" class="min-w-[150px] px-2 py-3 bg-blue-700 text-white font-semibold text-sm rounded-full
            bottom-2 "> {{allcontacts}}/{{totaluser}}</button>
          </div>
          </ng-container>
